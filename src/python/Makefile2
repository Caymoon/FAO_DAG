.PHONY: swig python all clean

swig:
	#swig -python -c++ -I../ -outcurrentdir -o FAO_DAG_wrap.cu FAO_DAG.i

	nvcc -Xcompiler -fno-strict-aliasing,-fno-common,-dynamic,-fwrapv,-Wall,-Wstrict-prototypes \
	-I/usr/local/include -I/usr/local/opt/sqlite/include \
	-DNDEBUG -g -O3  -DLAPACK_LIB_FOUND \
	-I/usr/local/lib/python2.7/site-packages/numpy/core/include \
	-I../ -I../../include/ -I../../include/scs/include/ \
	-I../../include/pogs_fork/src/include/ \
	-I/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/include/python2.7 \
	-c FAO_DAG_wrap.cu \
	-o FAO_DAG_wrap.o \
	-std=c++11 -pg -DFAO_GPU

	g++ -bundle -undefined dynamic_lookup \
	-L/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib \
	-arch x86_64 -L/usr/local/include \
	-I/usr/local/include \
	FAO_DAG_wrap.o ../../include/pogs_fork/src/build/pogs.a \
	-L ../../include/scs/out -lscsindir \
	-L/usr/local/cuda/lib -L/usr/local/lib \
	-lcudart -lcublas -lcusparse \
	-L/usr/lib -L/usr/lib \
	-lfftw3 -lfftw3f -lfftw3l -lfftw3_threads \
	-lfftw3f_threads -lfftw3l_threads \
	-o _FAO_DAG.so
